<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página 31</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="../css/estilos.css">

    <!-- Librerias -->
    <script src="../js/librerias/jquery.min.js"></script>
    <script src="../js/librerias/gsap.min.js"></script>

    <!-- Script de animaciones -->
    <script src="../js/animaciones.js"></script>
    <!-- Scripts posicionar elementos -->
    <script src="../js/redimensionarElementos.js"></script>
    <script src="../js/posicionar.js"></script>

</head>
<body class="pagina">
    <img class="elementos" id="fondo" src="../img/pagina31/fondo.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="subtema" src="../img/pagina31/subtema.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="texto" src="../img/pagina31/texto.png" data-posX="0" data-posY="0" alt="">

    <img class="elementos" id="p1" src="../img/pagina31/p1.png" data-posX="0" data-posY="0" alt="">
    <div class="elementos rPorcentaje" id="porcentaje1" data-posX="553" data-posY="112" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje2" data-posX="553" data-posY="130" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje3" data-posX="553" data-posY="148" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje4" data-posX="553" data-posY="164" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje5" data-posX="553" data-posY="186" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje6" data-posX="553" data-posY="204" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje7" data-posX="553" data-posY="223" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje8" data-posX="553" data-posY="242" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje9" data-posX="553" data-posY="260" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje10" data-posX="553" data-posY="278" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje11" data-posX="553" data-posY="297" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje12" data-posX="553" data-posY="315" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje13" data-posX="553" data-posY="333" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje14" data-posX="553" data-posY="350" data-respuesta="b"></div>
    <div class="elementos rPorcentaje" id="porcentaje15" data-posX="553" data-posY="369" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje16" data-posX="553" data-posY="386" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje17" data-posX="553" data-posY="405" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje18" data-posX="553" data-posY="423" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje19" data-posX="553" data-posY="441" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje20" data-posX="553" data-posY="459" data-respuesta="m"></div>
    <div class="elementos rPorcentaje" id="porcentaje21" data-posX="553" data-posY="477" data-respuesta="m"></div>

    <img class="elementos" id="tache1" src="../img/pagina31/tache.png" data-posX="245" data-posY="312" alt="">
    <img class="elementos" id="paloma1" src="../img/pagina31/paloma.png" data-posX="245" data-posY="312" alt="">
    <img class="elementos" id="barra1" src="../img/pagina31/barra1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="siguiente1" src="../img/pagina31/siguiente.png" data-posX="218" data-posY="436" alt="">

    <img class="elementos" id="p2" src="../img/pagina31/p2.png" data-posX="0" data-posY="0" alt="">
    <div class="elementos rMultiple" id="incisoA" data-posX="494" data-posY="218" data-respuesta="b"></div>
    <div class="elementos rMultiple" id="incisoB" data-posX="494" data-posY="262" data-respuesta="m"></div>
    <div class="elementos rMultiple" id="incisoC" data-posX="494" data-posY="304" data-respuesta="m"></div>

    <img class="elementos" id="barra2" src="../img/pagina31/barra2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="tache2" src="../img/pagina31/tache.png" data-posX="245" data-posY="312" alt="">
    <img class="elementos" id="paloma2" src="../img/pagina31/paloma.png" data-posX="245" data-posY="312" alt="">
    <img class="elementos" id="siguiente2" src="../img/pagina31/siguiente.png" data-posX="651" data-posY="392" alt="">
    <img class="elementos" id="retroBuena" src="../img/pagina31/retroBuena.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="retroMala" src="../img/pagina31/retroMala.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="reintentar" src="../img/pagina31/reintentar.png" data-posX="436" data-posY="328" alt="">

</body>

    <!-- Script de la página -->
    <script>

        // Variable----------------------------------------------------
        let aplicacion = parent;

        const texto = $('#texto');
        const fondo = $('#fondo');
        const subtema = $('#subtema');

        const p1 = $('#p1');
        const porcentaje1 = $('#porcentaje1');
        const porcentaje2 = $('#porcentaje2');
        const porcentaje3 = $('#porcentaje3');
        const porcentaje4 = $('#porcentaje4');
        const porcentaje5 = $('#porcentaje5');
        const porcentaje6 = $('#porcentaje6');
        const porcentaje7 = $('#porcentaje7');
        const porcentaje8 = $('#porcentaje8');
        const porcentaje9 = $('#porcentaje9');
        const porcentaje10 = $('#porcentaje10');
        const porcentaje11 = $('#porcentaje11');
        const porcentaje12 = $('#porcentaje12');
        const porcentaje13 = $('#porcentaje13');
        const porcentaje14 = $('#porcentaje14');
        const porcentaje15 = $('#porcentaje15');
        const porcentaje16 = $('#porcentaje16');
        const porcentaje17 = $('#porcentaje17');
        const porcentaje18 = $('#porcentaje18');
        const porcentaje19 = $('#porcentaje19');
        const porcentaje20 = $('#porcentaje20');
        const porcentaje21 = $('#porcentaje21');
        const rPorcentaje = $('.rPorcentaje');
        const tache1 = $('#tache1');
        const paloma1 = $('#paloma1');
        const barra1 = $('#barra1');
        const siguiente1 = $('#siguiente1');

        const p2 = $('#p2');
        const incisoA = $('#incisoA');
        const incisoB = $('#incisoB');
        const incisoC = $('#incisoC');
        const rMultiple = $('.rMultiple');
        const siguiente2 = $('#siguiente2');

        const tache2 = $('#tache2');
        const paloma2 = $('#paloma2');
        const barra2 = $('#barra2');
        const retroBuena = $('#retroBuena');
        const retroMala = $('#retroMala');
        const reintentar = $('#reintentar');

        rPorcentaje.css({
            'width': '60px',
            'height': '16px',
            'cursor': 'pointer'
        });

        rMultiple.css({
            'width': '461px',
            'height': '29px',
            'cursor': 'pointer'
        });

        let aciertos = 0;

        // Audios------------------------------------------------------
        const audio = [
            new Audio('../audios/Proporcional_31_1.mp3'),
            new Audio('../audios/s_bien.mp3'),
            new Audio('../audios/s_mal.mp3')
        ]

        // Al cargarse la página
        $(window).on("load", function(){
            redimensionarElementos();
            aplicacion.cargando(iniciarContenido);
        });

        function iniciarContenido(){
            aplicacion.reproducirAudio(audio[0], pregunta1, 1);
            animacionEntrada(fondo, 'default', 1, 1);
            animacionEntrada(texto, 'izquierda-derecha', 1, 1);
            animacionEntrada(subtema, 'deracha-izquierda', 1, 1);
        }

        function pregunta1() {  
            animacionSalida(texto, 'default', 1, 1);
            animacionEntrada(p1, 'default', 1, 2);
            animacionEntrada(rPorcentaje, 'default', 1, 2);
        }

        rPorcentaje.each(function(){

            $(this).click(function(){

                if($(this).css('cursor') == 'pointer'){

                    const respuesta = $(this).data('respuesta');
                    
                    if(respuesta == 'b'){
                        animacionEntrada(paloma1, 'default', 1);
                        animacionEntrada(barra1, 'default', 1);
                        audio[1].play();
                        aciertos++;
                    }
                    else{
                        animacionEntrada(tache1, 'default', 1);
                        audio[2].play();
                    }

                    parpadear(siguiente1);
                }
            });

        });

        siguiente1.click(function(){
            animacionSalida(p1, 'default', 1);
            animacionSalida(rPorcentaje, 'default', 1);
            animacionSalida(paloma1, 'default', 1);
            animacionSalida(tache1, 'default', 1);
            animacionSalida(barra1, 'default', 1);
            dejarParpadear(siguiente1);
            animacionSalida(siguiente1, 'default', 1);

            animacionEntrada(p2, 'default', 1);
            animacionEntrada(rMultiple, 'default', 1);
        });

        
        rMultiple.each(function(){

            $(this).click(function(){

                if($(this).css('cursor') == 'pointer'){

                    const respuesta = $(this).data('respuesta');
                    
                    if(respuesta == 'b'){
                        animacionEntrada(paloma2, 'default', 1);
                        animacionEntrada(barra2, 'default', 1);
                        audio[1].play();
                        aciertos++;
                    }
                    else{
                        animacionEntrada(tache2, 'default', 1);
                        audio[2].play();
                    }

                    parpadear(siguiente2);
                }
            });

        });        

        siguiente2.click(function(){
            animacionSalida(p2, 'default', 1);
            animacionSalida(rMultiple, 'default', 1);
            animacionSalida(paloma2, 'default', 1);
            animacionSalida(tache2, 'default', 1);
            animacionSalida(barra2, 'default', 1);
            dejarParpadear(siguiente2);
            animacionSalida(siguiente2, 'default', 1);

            if(aciertos == 2){
                animacionEntrada(retroBuena, 'default', 1);
                aplicacion.terminaPantalla();
            }
            else{
                animacionEntrada(retroMala, 'default', 1);
                parpadear(reintentar);
            }
        });

        reintentar.click(function(){
            aplicacion.recargarPagina();
        });

    </script>
</body>
</html>